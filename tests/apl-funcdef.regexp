(?x)
	^\s*?
	
	(?# 1: keyword.operator.nabla.apl)
	(∇)
	
	
	(?:
		\s*
		
		(?:
			(?# 2: entity.function.return-value.apl)
			([A-Za-z_∆⍙][\w∆⍙¯]*)
			
			|
			
			\s*
			(?# 3: entity.function.return-value.shy.apl)
			(
				(\{)             (?# 4: punctuation.definition.return-value.begin.apl)
				(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
				(\})             (?# 5: punctuation.definition.return-value.end.apl)
				
				|
				
				(\()             (?# 6: punctuation.definition.return-value.begin.apl)
				(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
				(\))             (?# 7: punctuation.definition.return-value.end.apl)
				
				|
				
				(\(\s*\{)        (?# 8: punctuation.definition.return-value.begin.apl)
				(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
				(\}\s*\))        (?# 9: punctuation.definition.return-value.end.apl)
				
				|
				
				(\{\s*\()        (?# 10: punctuation.definition.return-value.begin.apl)
				(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
				(\)\s*\})        (?# 11: punctuation.definition.return-value.end.apl)
			)
			\s*
		)
		
		\s*
		
		(?# 12: keyword.operator.assignment.apl)
		(←)
	)?
	
	\s*
	
	
	(?:
		(?# MONADIC)
		(?:
			(?# 13: entity.function.name.apl)
			([A-Za-z_∆⍙][\w∆⍙¯]*)
			
			\s*
			
			
			(?# 14: entity.function.axis.apl)
			(
				(?# 15: punctuation.definition.axis.begin.apl)
				(\[)
					\s*
					(?:
						\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*
						
						(?# 16: invalid.illegal.extra-characters.apl)
						(.*?)
						|
						(?# 17: invalid.illegal.apl)
						([^\]]*)
					)
					\s*
				(?# 18: punctuation.definition.axis.end.apl)
				(\])
			)?
			
			\s*?
			
			
			(?# 19: entity.function.arguments.right.apl)
			(
				(?<=\s|\])[A-Za-z_∆⍙][\w∆⍙¯]*
				|
				(\()   (?# 20: punctuation.definition.arguments.begin.apl)
				(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
				(\))   (?# 21: punctuation.definition.arguments.end.apl)
			)
			\s*
			(?=;|$)
		)
		
		|
		
		(?# DYADIC/AMBIVALENT)
		(?#==================)
			(?:
				(?# 22: entity.function.arguments.left.apl)
				([A-Za-z_∆⍙][\w∆⍙¯]*\s+)
				
				|
				
				(?# 23: entity.function.arguments.left.optional.apl)
				(
					(\{)          (?# 24: punctuation.definition.arguments.begin.apl)
					(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
					(\})          (?# 25: punctuation.definition.arguments.end.apl)
					|
					(\(\s*\{)   (?# 26: punctuation.definition.arguments.begin.apl)
					(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
					(\}\s*\))   (?# 27: punctuation.definition.arguments.end.apl)
					|
					(\{\s*\()   (?# 28: punctuation.definition.arguments.begin.apl)
					(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
					(\)\s*\})   (?# 29: punctuation.definition.arguments.end.apl)
				)
			)?
		
			\s*
			
			(?:
				(?# 30: entity.function.name.apl)
				([A-Za-z_∆⍙][\w∆⍙¯]*)
				
				\s*
				
				(?# 31: entity.function.axis.apl)
				(
					(?# 32: punctuation.definition.axis.begin.apl)
					(\[)
						\s*
						(?:
							\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*
							
							(?# 33: invalid.illegal.extra-characters.apl)
							(.*?)
							|
							(?# 34: invalid.illegal.apl)
							([^\]]*)
						)
						\s*
					(?# 35: punctuation.definition.axis.end.apl)
					(\])
				)?
				
				|
				
				(?# 36: entity.function.operands.apl)
				(
					(?# 37: punctuation.definition.operands.begin.apl)
					(\()
					
					(?# 38: entity.function.operands.left.apl)
					(\s*[A-Za-z_∆⍙][\w∆⍙¯]*)?
					
					\s*
					
					(?# 39: entity.function.name.apl)
					([A-Za-z_∆⍙][\w∆⍙¯]*)
					
					\s*?
					
					(?# 40: entity.function.axis.apl)
					(
						(?# 41: punctuation.definition.axis.begin.apl)
						(\[)
							\s*
							(?:
								\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*
								
								(?# 42: invalid.illegal.extra-characters.apl)
								(.*?)
								|
								(?# 43: invalid.illegal.apl)
								([^\]]*)
							)
							\s*
						(?# 44: punctuation.definition.axis.end.apl)
						(\])
					)?
					
					\s*
					
					(?# 45: entity.function.operands.right.apl)
					([A-Za-z_∆⍙][\w∆⍙¯]*\s*)?
					
					(?# 46: punctuation.definition.operands.end.apl)
					(\))
				)
			)
			
			\s*
			
			(?# 47: entity.function.arguments.right.apl)
			(
				(?<=\s|\])[A-Za-z_∆⍙][\w∆⍙¯]*
				|
				\s*
				(\()   (?# 48: punctuation.definition.arguments.begin.apl)
				(?:\s*[A-Za-z_∆⍙][\w∆⍙¯]*\s*)*
				(\))   (?# 49: punctuation.definition.arguments.end.apl)
			)?
		(?#==================)
	)


	\s*
	
	
	(?# 50: invalid.illegal.arguments.right.apl)
	([^;]+)?
	
	(?# 51: entity.function.local-variables.apl)
	(
		(?# 52: Include “;”)
		(
			(?:
				\s*
				;
				(?:\s*[⎕A-Za-z_∆⍙][\w∆⍙¯]*\s*)+
			)+
		)
		|
		(?# 53: invalid.illegal.local-variables.apl)
		([^⍝]+)
	)?
	
	\s*
	
	(?# 54: comment.line.apl)
	(⍝.*)?
	
$
