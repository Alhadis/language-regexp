(?x)^
	([.'])   [ \t]*      # 1: punctuation.definition.request.roff
	(ie|if)  [ \t]*      # 2: keyword.control.roff
	(!)?                 # 3: keyword.operator.logical
	
	(?:
		# One-character built-in comparison name
		([notev])        # 4: constant.language.builtin-comparison.$4.roff
		
		|
		
		# GNU extensions
		([cdfmrs])       # 5: constant.language.builtin-comparison.$5.gnu.roff
		
		# Name being validated
		[ \t]*
		((?:[^ \t\\]|\\(?!["#]).)+) # 6: Include "#escapes"
		
		|
		
		# Arithmetic
		(                # 7: meta.equation.roff
			
			# Starts with a bracket
			(\()         # 8:  punctuation.definition.begin.roff
			(.*?)        # 9:  Include "#arithmetic"
			(\))         # 10: punctuation.definition.end.roff
			
			# Anything else affixed to it
			(            # 11: Include "#arithmetic"
				(?:
					[^\s\(] | # Operators/numbers
					\(.*?\)   # More brackets
				)*
			)
			
			|
			
			# Doesn't start with a bracket
			(?:
				# Starts with a long-form string/register
				(\|?\\+[n*]\(\S{2}) # 12: Include "#escapes"
				|
				# Starts with a digit or backslash
				(?=\d|\\)
			)
			([^\s\(]*) # 13: Sandwiched mathematical junk
			
			(?: # Possible embedded brackets
				(\()     # 14: punctuation.definition.begin.roff
				(.*?)    # 15: Include "#arithmetic"
				(\))     # 16: punctuation.definition.end.roff
			)?
			(?: # Possible trailing digits/operators
				[^\s\(]*?
				\d+
			)?
			
			# Ends with a...
			(?<=
				# Digit
				\d |
				
				# Unit suffix
				(?<=[\d.])
				[A-Za-z] |
				
				# Closing bracket
				[\)\]] |
				
				# String/register: Long-form
				\\[n*]
				\(
				\S{2} |
				
				# String/register: Short-form
				\\[n*]\S
			)
		)
		
		|
		
		# String/variable comparison
		([^\d\s\\])  # 17: punctuation.definition.string.begin.roff
		(                # 18: variable.parameter.operand.left.roff
			(.*?)        # 19: Include "#escapes"
		)
		(\17)            # 20: punctuation.definition.string.roff
		(                # 21: variable.parameter.operand.right.roff
			(.*?)        # 22: Include "#escapes"
		)
		(\17)            # 23: punctuation.definition.string.end.roff
		
		|
		
		# Anything not recognised
		(\S)             # 24: meta.operand.single.roff
	)?
	
	(.*)                 # 25: Include "#conditional-innards"
